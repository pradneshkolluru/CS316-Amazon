{% extends "base.html" %}

{% block content %}

<br><br>
{% if current_user.is_authenticated %}
<h4>Your account information:</h4>
<h5>Account Number: {{current_user.id}}</h5><br>
<h5>Current Balance: ${{current_user.balance}}</h5>
<form action="{{ url_for('users.add_balance')}}" method = "POST">
  <label for="NewBalance">Add money: </label>
  <input type="number" min="0" step="0.01" id="newBalance" name="newBalance">
  <!-- <input type="submit" value="Submit"> -->
</form>
<form action="{{ url_for('users.withdraw')}}" method = "POST">
  <label for="Withdraw">Withdraw money: </label>
  <input type="number" min="0" max="{{current_user.balance}}" step="0.01" id="withdraw" name="withdraw">
  <!-- <input type="submit" value="Submit"> -->
</form><br>
{% if not seller %}
<h5>Want to start selling?</h5>
<form action="{{ url_for('users.register_seller')}}" method = "POST">
  <input type="submit" value="Register Here">
</form><br>
{% endif %}

<p><a href="{{ url_for('users.public_view', id=current_user.id) }}">Click here</a> to view your public profile!</p>

<table class='table table-hover table-bordered container'>
  <thead class="thead-dark">
    <tr>
      <th scope="col">Email</th>
      <th scope="col">First Name</th>
      <th scope="col">Last Name</th>
      <th scope="col">Address</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td scope="row">{{current_user.email}}</td>
      <td scope="row">{{current_user.firstname}}</td>
      <td scope="row">{{current_user.lastname}}</td>
      <td scope="row">{{current_user.address}}</td>
    </tr>
    <tr>
      <td scope="row">
        <form action="{{ url_for('users.update_email')}}" method = "POST">
          <label for="newEmail">New Email: </label>
          <input type="email" id="newEmail" name="newEmail"><br><br>
          <input type="submit" value="Update Email"><br>
          {% for error in get_flashed_messages() %}
          <span style="color: red;">{{ error }}</span>
          {% endfor %}
        </form>
      </td>
      <td scope="row">
        <form action="{{ url_for('users.update_first_name')}}" method = "POST">
          <label for="NewFirst">New First Name: </label>
          <input type="text" id="newFirst" name="newFirst"><br><br>
          <input type="submit" value="Update First Name">
        </form>
      </td>
      <td scope="row">
        <form action="{{ url_for('users.update_last_name')}}" method = "POST">
          <label for="NewLast">New Last Name: </label>
          <input type="text" id="newLast" name="newLast"><br><br>
          <input type="submit" value="Update Last Name">
        </form>
      </td>
      <td scope="row">
        <form action="{{ url_for('users.update_address')}}" method = "POST">
          <label for="NewAddress">New Address: </label>
          <input type="text" id="newAddress" name="newAddress"><br><br>
          <input type="submit" value="Update Address">
        </form>
      </td>
    </tr>
  </tbody>
</table>

<!-- <h5>View your purchase history <a href="{{ url_for('purchases.purchases') }}">here</a>!</h5> -->
<!-- <h5>View your recent reviews <a href="{{ url_for('reviews.reviews') }}">here</a>!</h5> -->
<!-- <h5>View your recent seller reviews <a href="{{ url_for('sellerReviews.sellerReviews') }}">here</a>!</h5> -->
{% else %}
<p><a href="{{ url_for('users.login') }}">Log in</a> to see your account information!</p>
{% endif %}

{% endblock %}